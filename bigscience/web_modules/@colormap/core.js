function k(a,d,b,e){if(e<=b)return b;const c=Math.floor(b+(e-b)/2),h=d-a[c].value,f=d-a[c+1].value;return h<0?k(a,d,b,c-1):f<0?c:k(a,d,c+1,e)}const n=(a,d,b)=>{const e=(a-d)/(b-d);return[1-e,e]};function o(a){return a.value!==void 0&&a.mapped!==void 0}function p(a){return a.length>0&&o(a[0])}function l(a,d,b,e){return[a*d[0]+b*e[0],a*d[1]+b*e[1],a*d[2]+b*e[2]]}function m(a){return a?a:n}function q(a,d,b){return!Array.isArray(a)||a.length<1?t:p(a)?r(a,d,m(b),l):s(a,d,m(b),l)}function r(a,d,b,e){const c=a.sort((h,f)=>h.value<f.value?-1:1);return function(h){const f=d(h),g=k(c,f,0,c.length-1);if(g==0&&f<c[0].value)return c[g].mapped;if(g==c.length-1)return c[g].mapped;const[i,j]=b(f,c[g].value,c[g+1].value);return e(i,c[g].mapped,j,c[g+1].mapped)}}function s(a,d,b,e){return function(c){const h=d(c),f=(a.length-1)*h;if(f<=0)return a[0];if(f>=a.length-1)return a[a.length-1];const g=Math.floor(f),[i,j]=b(f,g,g+1);return e(i,a[g],j,a[g+1])}}function t(a){return[0,0,0]}function u(a,d){let[b,e]=a;const[c,h]=d;return Math.abs(b-e)<Number.EPSILON&&(e=b+1),function(f){return c+(h-c)*((f-b)/(e-b))}}export{q as createColorMap,u as linearScale};
