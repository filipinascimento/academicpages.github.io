let y=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,g){return window.setTimeout(a,1e3/60)}}(),z=window.cancelAnimationFrame||window.mozCancelAnimationFrame;function A(a,g){let e=["webgl","experimental-webgl","webkit-3d","moz-webgl"],d=null;for(let c=0;c<e.length;++c){try{d=a.getContext(e[c],g)}catch(f){}if(d)break}return d}async function B(a,g){let e=document.getElementById(g);if(!e)return null;let d="",c=e.firstChild;for(;c;)c.nodeType==3&&(d+=c.textContent),c=c.nextSibling;e.src&&(d=await fetch(e.src).then(b=>b.text()));let f;if(e.type=="text/glsl-fragment")f=a.createShader(a.FRAGMENT_SHADER);else if(e.type=="text/glsl-vertex")f=a.createShader(a.VERTEX_SHADER);else return null;return console.log(d),a.shaderSource(f,d),a.compileShader(f),a.getShaderParameter(f,a.COMPILE_STATUS)?f:(console.log(a.getShaderInfoLog(f)),null)}function C(a,g,e,d,c){let f=c.createProgram();c.attachShader(f,a),c.attachShader(f,g),c.linkProgram(f);if(!c.getProgramParameter(f,c.LINK_STATUS)){alert("Shader Compilation Error.");return}this.id=f,this.uniforms=new Object(),this.attributes=new Object();if(e)for(let b=0;b<e.length;b++)this.uniforms[e[b]]=c.getUniformLocation(this.id,e[b]);this.attributes.enable=function(b){c.enableVertexAttribArray(this[b])},this.attributes.disable=function(b){c.disableVertexAttribArray(this[b])};if(d)for(let b=0;b<d.length;b++)this.attributes[d[b]]=c.getAttribLocation(this.id,d[b]);this.use=function(b){b.useProgram(this.id)}}function D(a,g,e,d){for(var c=[],f=[],b=[],i=[],j=0;j<=e;++j)for(var k=0;k<=d;++k){var n=j*Math.PI/e,o=k*2*Math.PI/d,p=Math.sin(n),t=Math.sin(o),u=Math.cos(n),v=Math.cos(o),q=v*p,r=u,s=t*p,w=1-k/d,x=j/e;f.push(q),f.push(r),f.push(s),b.push(w),b.push(x),c.push(g*q),c.push(g*r),c.push(g*s)}for(var j=0;j<e;++j)for(var k=0;k<d;++k){var l=j*(d+1)+k,m=l+d+1;i.push(l),i.push(m),i.push(l+1),i.push(m),i.push(m+1),i.push(l+1)}var h={};return h.normalObject=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,h.normalObject),a.bufferData(a.ARRAY_BUFFER,new Float32Array(f),a.STATIC_DRAW),h.texCoordObject=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,h.texCoordObject),a.bufferData(a.ARRAY_BUFFER,new Float32Array(b),a.STATIC_DRAW),h.vertexObject=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,h.vertexObject),a.bufferData(a.ARRAY_BUFFER,new Float32Array(c),a.STATIC_DRAW),h.numIndices=i.length,h.indexObject=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,h.indexObject),a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(i),a.STREAM_DRAW),h.indexType=a.UNSIGNED_SHORT,h}function E(a,g=!0,e=!0){let d=[-1,1,0,-1,-1,0,1,1,0,1,-1,0],c=[0,0,1,0,0,1,0,0,1,0,0,1],f=[0,1,0,1,0,0,1,1,0,0,0,0],b={};return e&&(b.texCoordObject=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,b.texCoordObject),a.bufferData(a.ARRAY_BUFFER,new Float32Array(f),a.STATIC_DRAW)),g&&(b.normalObject=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,b.normalObject),a.bufferData(a.ARRAY_BUFFER,new Float32Array(c),a.STATIC_DRAW)),b.vertexObject=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,b.vertexObject),a.bufferData(a.ARRAY_BUFFER,new Float32Array(d),a.STATIC_DRAW),b.numIndices=4,b}function F(a){return a*Math.PI/180}export{D as makeSphere,E as makePlane,B as getShader,C as ShaderProgram,y as requestAnimationFrame,z as cancelAnimationFrame,A as createWebGLContext,F as degToRad};
