import*as d from"./web_modules/d3.js";function w({color:a,title:e,tickSize:b=6,width:c=320,height:f=44+b,marginTop:j=18,marginRight:m=0,marginBottom:i=16+b,marginLeft:l=0,ticks:s=c/64,tickFormat:h,tickValues:p}={}){const o=d.create("svg").attr("width",c).attr("height",f).attr("viewBox",[0,0,c,f]).style("overflow","visible").style("display","block");let t=g=>g.selectAll(".tick line").attr("y1",j+i-f),k;if(a.interpolate){const g=Math.min(a.domain().length,a.range().length);k=a.copy().rangeRound(d.quantize(d.interpolate(l,c-m),g)),o.append("image").attr("x",l).attr("y",j).attr("width",c-l-m).attr("height",f-j-i).attr("preserveAspectRatio","none").attr("xlink:href",v(a.copy().domain(d.quantize(d.interpolate(0,1),g))).toDataURL())}else if(a.interpolator){k=Object.assign(a.copy().interpolator(d.interpolateRound(l,c-m)),{range(){return[l,c-m]}}),o.append("image").attr("x",l).attr("y",j).attr("width",c-l-m).attr("height",f-j-i).attr("preserveAspectRatio","none").attr("xlink:href",v(a.interpolator()).toDataURL());if(!k.ticks){if(p===void 0){const g=Math.round(s+1);p=d.range(g).map(r=>d.quantile(a.domain(),r/(g-1)))}typeof h!=="function"&&(h=d.format(h===void 0?",f":h))}}else if(a.invertExtent){const g=a.thresholds?a.thresholds():a.quantiles?a.quantiles():a.domain(),r=h===void 0?n=>n:typeof h==="string"?d.format(h):h;k=d.scaleLinear().domain([-1,a.range().length-1]).rangeRound([l,c-m]),o.append("g").selectAll("rect").data(a.range()).join("rect").attr("x",(n,q)=>k(q-1)).attr("y",j).attr("width",(n,q)=>k(q)-k(q-1)).attr("height",f-j-i).attr("fill",n=>n),p=d.range(g.length),h=n=>r(g[n],n)}else k=d.scaleBand().domain(a.domain()).rangeRound([l,c-m]),o.append("g").selectAll("rect").data(a.domain()).join("rect").attr("x",k).attr("y",j).attr("width",Math.max(0,k.bandwidth()-1)).attr("height",f-j-i).attr("fill",a),t=()=>{};return o.append("g").attr("transform",`translate(0,${f-i})`).call(d.axisBottom(k).ticks(s,typeof h==="string"?h:void 0).tickFormat(typeof h==="function"?h:void 0).tickSize(b).tickValues(p)).call(t).call(g=>g.select(".domain").remove()).call(g=>g.append("text").attr("x",l).attr("y",j+i-f-6).attr("fill","currentColor").attr("text-anchor","start").attr("font-weight","bold").attr("class","title").text(e)),o.node()}function x(a,e){for(let b of e)if(!a.has(b))return!1;return!0}function y(a,e){let b=new Set(a);for(let c of e)b.add(c);return b}function z(a,e){let b=new Set();for(let c of e)a.has(c)&&b.add(c);return b}function A(a,e){let b=new Set(a);for(let c of e)b.has(c)?b.delete(c):b.add(c);return b}function B(a,e){let b=new Set(a);for(let c of e)b.delete(c);return b}class u{constructor({x:a=0,y:e=0,k:b=1}){this.x=a,this.y=e,this.k=b}toString(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}inverse(){return new u({x:-1/this.k*this.x,y:-1/this.k*this.y,k:1/this.k})}}function C({color:a,element:e,format:b=i=>i,swatchSize:c=15,swatchWidth:f=c,swatchHeight:j=c,marginLeft:m=0}){return d.select(e).html(`<div style="display: flex; align-items: center; min-height: 33px; justify-content: space-between; margin-left: ${+m}px;">
  ${Object.keys(a).map(i=>`<span class="swatch" style="--color: ${a[i]}">${b(i)}</span>`).join(" ")}</div>`)}function F(a){return`&#${a.charCodeAt(0).toString()};`}function v(a,e=256){const b=document.createElement("canvas");let c=(b.width=e,b.height=1,b).getContext("2d");for(let f=0;f<e;++f)c.fillStyle=a(f/(e-1)),c.fillRect(f,0,1,1);return b}function D(a){let e=a.length,b,c;for(;0!==e;)c=Math.floor(Math.random()*e),e-=1,b=a[e],a[e]=a[c],a[c]=b;return a}export{x as setIsSuperset,y as setUnion,z as setIntersection,A as setSymmetricDifference,B as setDifference,u as RegularTransform,D as arrayShuffle,w as legend,C as swatches};
